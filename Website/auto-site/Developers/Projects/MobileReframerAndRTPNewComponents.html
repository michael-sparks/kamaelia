<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | <a href="/About.html">About</a> | <a href="/Developers.html">Developers</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<h2 id="project-task-page-mobile-reframer-and-rtp-new-components">Project Task Page: Mobile Reframer and RTP New Components</h2>
<div class="boxright">
<p><strong>Status:</strong> Completed<br />
<strong>Current Developers:</strong> <em>MPS</em><br />
<strong>Current "inflight" dev location:</strong> /branches/private_MH_20070429_newcomponents<br />
<strong>Start Date:</strong> 29 April 2007<br />
<strong>End Date:</strong> <em>5 Aug 2007</em><br />
<strong>Date this page last updated:</strong> <em>5 Aug 2007</em><br />
<strong>Estimated effort so far:</strong> 14<br />
</p>
</div>
<p><strong><br />
</strong></p>
<h2 id="description"><strong>Description</strong></h2>
<p>Merging of <em>new</em> components developed for RTP and Mobile Reframer work (in /trunk/Sketches/MH ) into the main Kamaelia codebase thereby increasing Kamaelia's capabilities and facilitating the incorporation of the Mobile Reframe and RTP work as official examples or tools.</p>
<p>Note that this <em>does not</em> include components that were developed as modifications or rewrites of existing components that are not essential to the operation of the mobile reframer - such as the Multicast and Selector modifications. It does include the 'new' UnixProcess component and modifications to the Carousel.<br />
</p>
<h2 id="inputs">Inputs</h2>
<p>Task Sponsor: MH,MPS</p>
<p>Task Owner: MPS</p>
<p>Developers: MH,MPS</p>
<p>Users: n/a<br />
</p>
<p>Interested third parties: MPS</p>
<p>Requirements</p>
<ul>
<li>MUST add new components to main codebase in trunk<br />
</li>
<li>SHOULD not cause regressions<br />
</li>
</ul>
<h2 id="outputs">Outputs</h2>
<h3 id="expected">Expected</h3>
<p>New sourcefiles in<br />
</p>
<ul>
<li>/Code/Python/Kamaelia/Kamaelia</li>
<li>/Code/Python/Kamaelia/Tools<br />
</li>
</ul>
<h3 id="actual">Actual</h3>
<p>Branch /branches/private_MH_20070429_newcomponents/</p>
<p>...containing new components:</p>
<ul>
<li>/Code/Python/Kamaelia/Kamaelia/File/MaxSpeedFileReader.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/File/UnixProcess2.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Experimental/Chassis.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Chassis/Seq.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Chassis/Carousel.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Device/DVB/SoftDemux.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/XML/__init__.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/XML/SimpleXMLParser.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Protocol/RTP/__init__.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Protocol/RTP/RTP.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Protocol/RecoverOrder.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Protocol/SDP.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Video/CropAndScale.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Video/DetectShotChanges.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Video/PixFormatConversion.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Video/__init__.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Codec/WAV.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Codec/YUV4MPEG.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/UI/Pygame/VideoSurface.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/PromptedTurnstile.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/RateChunker.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/OneShot.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/TwoWaySplitter.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/Max.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/FirstOnly.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/RangeFilter.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/TagWithSequenceNumber.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/Sync.py</li>
<li>/Code/Python/Kamaelia/Kamaelia/Util/Collate.py</li>
<li>.</li>
</ul>
<p>Removed (moved elsewhere)<br />
</p>
<ul>
<li>/Code/Python/Bindings/MpegTsDemux/* <em>(moved into "SupportCode")</em><br />
</li>
<li>.<br />
</li>
</ul>
<p>New bindings/pyrex based optimised library</p>
<ul>
<li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/_PixFormatConvertCore.c</li>
<li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/__init__.py</li>
<li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/Kamaelia.Support.Optimised.Video.PixFormatConvert.pyx</li>
<li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Video/Kamaelia.Support.Optimised.Video.ComputeMeanAbsDiff.pyx</li>
<li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/__init__.py</li>
<li>/Code/Python/Bindings/SupportCode/Kamaelia/Support/Optimised/Kamaelia.Support.Optimised.MpegTsDemux.pyx</li>
<li>.<br />
</li>
</ul>
<p>New tests</p>
<ul>
<li>/Tests/Python/Kamaelia/Chassis/test_Carousel.py</li>
<li>.</li>
</ul>
<p>New tool: Video player:<br />
</p>
<ul>
<li>/Code/Python/Kamaelia/Tools/VideoPlayer.py</li>
<li>.<br />
</li>
</ul>
<p>New tool: Video Reframer:<br />
</p>
<ul>
<li>/Code/Python/Kamaelia/Tools/VideoReframer/VideoReframer.py</li>
<li>/Code/Python/Kamaelia/Tools/VideoReframer/MobileReframe.xsd</li>
<li>/Code/Python/Kamaelia/Tools/VideoReframer/EDL.py</li>
<li>/Code/Python/Kamaelia/Tools/VideoReframer/StopSelector.py</li>
<li>.<br />
</li>
</ul>
<p>New tool: Video shot change detector:<br />
</p>
<ul>
<li>/Code/Python/Kamaelia/Tools/VideoShotChangeDetector/DetectShotChanges.xsd</li>
<li>/Code/Python/Kamaelia/Tools/VideoShotChangeDetector/ShotChangeDetector.py</li>
<li>/Code/Python/Kamaelia/Tools/VideoShotChangeDetector/StopSelector.py</li>
<li>.</li>
</ul>
<p>New examples: RTP:</p>
<ul>
<li>/Code/Python/Kamaelia/Examples/UDP_Systems/RTP_G711_microphone_sender.py</li>
<li>/Code/Python/Kamaelia/Examples/UDP_Systems/RTP_G711_receiver.py</li>
<li>.<br />
</li>
</ul>
<p>Modified</p>
<ul>
<li>/Code/Python/Kamaelia/CHANGELOG</li>
<li>/Code/Python/Kamaelia/Kamaelia/Device/DVB/SoftDemux.py <em>(adjusted imports to match moved support pyrex lib)</em><br />
</li>
<li>/Code/Python/Kamaelia/Kamaelia/Chassis/Carousel.py <em>(Carousel rewrite to fix shutdown behaviour bugs)</em></li>
<li>/Code/Python/Bindings/SupportCode/setup.py</li>
<li>.<br />
</li>
</ul>
<h3 id="realistic-possibilities-arising-as-a-result-of-activity-on-this-task">Realistic possibilities arising as a result of activity on this task</h3>
<ul>
<li>Merging of mobile reframer itself<br />
</li>
</ul>
<h2 id="related-tasks">Related Tasks</h2>
<h3 id="tasks-that-directly-enable-this-task-dependencies">Tasks that directly enable this task (dependencies)</h3>
<ul>
<li><a href="/Developers/Projects/MobileReframer">Development of Mobile Reframer</a></li>
<li><a href="/Developers/Projects/MulticastRtpMpegRemultiplexer">Development of RTP Remuxing</a></li>
</ul>
<h3 id="sub-tasks">Sub Tasks</h3>
<ul>
<li>Branch containing modifications</li>
<li>Merge of branch</li>
</ul>
<h2 id="task-log">Task Log</h2>
<ul>
<li>2007 04 29 : <strong>Task status changed</strong> to running<br />
</li>
<li>2007 04 29 : Added developer MH</li>
<li>2007 05 17 : Branch ready for merge. Time spent: 13 days</li>
<li>2007 05 22 : MH : Some last minute additions (merge not commenced yet)</li>
<li>2007 08 01 : MPS Eventually merged (sorry for delay)<br />
</li>
</ul>
<h2 id="discussion">Discussion</h2>
<p>I originally opted to separate the merging of these completely new components from the merging of ones that modify/rewrite existing components. These components independently add new functionality that should not have any knockon impact on existing Kamaelia components and systems. Modifications/rewrites may do.<br />
<br />
I eventually decided it made sense to bundle everything to get mobile reframer (renamed Video Reframer) working, including the reframer itself into one branch. In practice most components are new. There is only one rewrite - the Carousel - which I've tested and added a long overdue test suite for that illustrates how it improves on the existing Carousel design. Finally, I've added the reframer itself and supplementary video player tool.<br />
<br />
It made sense to <strong>rename the Mobile Reframer to Video Reframer</strong> since the first name implies an unnecessary limitation on the range of applications it could be used for. In reality it could be used to process any re-editing and reframing of video for any purpose.<br />
<br />
This is taking longer than originally anticipated becuase various small bugs and fixes have been identified along the way - both due to the reframer and also asides from helping Google SoC students. In addition it took longer to rationalise these components; tidy up and fix documentation; and figure out how to neatly fit them into the main codebase.<br />
<br />
The <strong>SupportCode</strong> pyrex based library was introduced (and the <strong>SoftDemux</strong> one deprecated) because several of the components introduced for the video reframer, video player and cut detector require various optimised alogirthms (image difference comparisons, YUV-&gt;RGB conversion, etc). It feels sensible to bundle these together as generic support code as they have no dependencies on external libraries. I also chose to get them to appear under the Kamaelia.Support.Optimised namespace - as opposed to allowing them to litter the top level. SoftDemux naturally fitted into the category and so was rolled in too. Perhaps this should have been done as a separate branch. If so, it is relatively easy to separate out from this set of changes.<br />
</p>
<p>-- Matt, 16 May 2007<br />
</p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
