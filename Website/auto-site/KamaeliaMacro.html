<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>March 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<p><strong>Jan 2024 - This site, and Kamaelia are <a
href="https://github.com/sparkslabs/kamaelia/issues/7">being
updated</a>. There is significant work needed, and <a
href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are
welcome.</strong></p>
<h1 id="kamaelia-macro">Kamaelia Macro</h1>
<p><span
style="text-align: right; display: block; font-size: 18pt;">Tools for
timeshifting</span></p>
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/701GJnadkg2bjN?startSlide=1" width="597" height="486" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" style="margin: auto; display: block; border:1px solid #CCC; border-width:1px; margin-bottom:5px;max-width: 100%;" allowfullscreen>
</iframe>
<div style="margin-bottom:5px">
<strong><a href="https://www.slideshare.net/kamaelian/timeshift-everything-miss-nothing-mashup-your-pvr-with-kamaelia" title="Timeshift Everything, Miss Nothing - Mashup your PVR with Kamaelia" target="_blank">Timeshift
Everything, Miss Nothing - Mashup your PVR with Kamaelia</a></strong>
from
<strong><a href="https://www.slideshare.net/kamaelian" target="_blank">kamaelian</a></strong>
</div>
<p>For more context on timeshifting in Kamaelia, <a
href="http://kamaelia.sourceforge.net/ToolsForTimeshifting.html">please
see this page</a>.</p>
<h2 id="what-is-it">What is it?</h2>
<p>It records and transcodes what is broadcast over DTT for future
viewing. It is essentially a form of timeshifting. It is currently at a
prototype stage, and as such the contents of this page is subject to
change. Programs are captured, transcoded and then made avallable for
viewing in a variety of formats. The two primary formats are suitable
for handheld TV's and <em>relatively</em> small living room TVs.</p>
<p>The resulting data was forwarded to a simple front end for
demonstration purposes.</p>
<h2 id="high-level-architecture">High Level Architecture</h2>
<p>The high level architecture is as follows:</p>
<p><img src="/images/macro_1.1.png" /></p>
<p>This might seem too high level. However, due to Kamaelia's nature,
this has a direct mapping to the underlying code.</p>
<h2 id="channel-transcoding">Channel Transcoding</h2>
<p>A channel transcoder takes the data it recieves and splits it into
two.</p>
<ul>
<li>Scheduling information - EIT data - is extracted, and sent to an EIT
Handler. This looks for events - specifically programme changes. When
there's a programme change it spits out the information regarding the
programme. This "programme change" event is also used to break up the
transcoding, as we shall see shortly. The EIT information is also stored
as a MIME like object with a name that increments.</li>
<li>The audio/video data relating to the channel. To handle this a Unix
Shell out component - a <strong>Pipethrough</strong> component is
created. This performs the actual transcoding to a given filename. The
filename increments and matches the EIT data. The transcoding is
specifically done by performing a shell out to
<code>mencoder</code>.</li>
</ul>
<p>Diagrammatically, this looks like this: (only one actual transcoder
shown for simplicity)</p>
<p><img src="/images/macro_1.2.png" /></p>
<p>The interesting point is what happens when there's a programme event
change. In this circumstance, new transcoders are created, and the audio
visual data is sent to them. The original transcoders are sent shutdown
messages telling them to shutdown after completing their transcoding.
This then triggers the copying of the transcoded data &amp; captured
metadata to a location where the (currently simple) frontend can access
it</p>
<p>Diagrammatically, the replumbing looks like this:</p>
<p><img src="/images/macro_1.3.png" /></p>
<p>Specifically, files are created of the form:</p>
<ul>
<li>channelname.programmeid.bitrate.avi # 200 Kbit/s</li>
<li>channelname.programmeid.bitrate.avi # 512 Kbit/s</li>
<li>channelname.programmeid.bitrate.DONE # 200 Kbit/s</li>
<li>channelname.programmeid.bitrate.DONE # 512 Kbit/s</li>
<li>channelname.programmeid.META</li>
</ul>
<h3 id="primitive-front-end">Primitive Front End</h3>
<p>The existing front end is a simple prototype that shows how a
standard single channel can be made to look like a RSS feed like any
other "web" channel. This is - probably unsurprisingly - no longer
visible for lots of reasons!</p>
<p>A snapshot of the current view:</p>
<p><img src="/screenshots/KamaeliaMacro.png" style="width:100%" /></p>
<h2 id="future">Future?</h2>
<p>The code &amp; system described here is not the final version. The
upcoming release of Kamaelia &amp; Axon (0.4.0 and 1.5.0 respectively)
will include the simple version of Macro as an example, in examples 15
specifically. Until then in order to use this you'll want to grab a
bundle, follow the instructions for getting started, and then get a
recent CVS snapshot. Please contact us for help in getting started. Once
again though, bear in mind that these tools have been created for legal
timeshifting purposes only.</p>
<p>If you're interested in collaborating on building this and taking
this technology forward (or perhaps even building into a domestic PVR,
or a personal/homebrew PVR) we'd be very interested in hearing from
you!</p>
<h2 id="end-notes">End Notes</h2>
<p>Kamaelia tools for timeshifting are relatively nascent, but as can be
seen can be used for a variety of interesting uses already. As it should
be clear, extending these systems to do more would be relatively simple.
For example rebroadcasting the transcoded data using multicast is a
relatively simple extension.</p>
<p>Regarding Kamaelia, this work has been useful so far for driving a
large amount of optimisation work for the core system - Axon. This has
had a number of knockon effects, such as making collaborative
whiteboarding a realistically useful tool.</p>
<hr />
<p>Michael, May 2006</p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
