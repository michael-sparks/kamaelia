<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>March 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<p><span id="Scheduler"></span><span
style="font-size:14pt;font-weight:600">2. Scheduler - A means of running
lots of microprocesses</span></p>
<p><span style="font-weight:600">Exercise:</span>Write a class called
<span style="font-family:Courier;font-weight:600">scheduler</span> with
the following characteristics.</p>
<ul>
<li>It should subclass microprocess.</li>
</ul>
<p>Objects created shold have the following attributes:</p>
<ul>
<li><span style="font-family:Courier">self.active</span> - this is a
list. (initially empty)</li>
<li><span style="font-family:Courier">self.newqueue</span> - this is
also a list. (initially empty)<br />
<span style="font-weight:600">Hint:</span>Initialise these in the
__init__ method!</li>
</ul>
<p>Objects created should have the following methods:</p>
<p><span style="font-family:Courier">__init__(self)</span> - Perform any
initialisation you need here (see above)<br />
<span style="font-weight:600">Remember:</span>Don't forget to called
your super class's __init__ method!</p>
<p><span style="font-family:Courier">main(self)</span>- Takes no
arguments<br />
This should be a generator with the following logic: (Looped 100
times)</p>
<p>Loop through all the objects in self.active using any mechanism you
choose.</p>
<ul>
<li>IMMEDIATELY YIELD CONTROL HERE WITH a "non -1 value"</li>
<li>Suppose you call the current object (from self.active) current</li>
<li>Call current.next()</li>
<li>If a StopIteration exception is thrown, just catch and skip on to
the next iteration. (eg continue)</li>
<li>If the result from current.next() was NOT -1, then append current
onto self.newqueue</li>
</ul>
<p>Having looped through all the objects, REPLACE self.active with
self.newqueue, and replace the value of self.newqueue with a new empty
list</p>
<p><span style="font-family:Courier">activateMicroprocess(self,
someprocess)</span></p>
<ul>
<li>someprocess is a microprocess object (or anything that conforms to
the same interface/behaviour seen by the scheduler).</li>
<li>This method should call the object's main method and append the
result to self.newqueue</li>
</ul>
<p><strong><a href="/MiniAxon/Scheduler?template=veryplain">Answer
Hidden</a></strong></p>
<p><strong><a
href="/MiniAxon/Scheduler?template=veryplain&amp;sat=2">Show
Answer</a></strong></p>
<p><span style="font-weight:600">Answer:</span></p>
<ul>
<li>Select from the above tabs to show the answer!</li>
</ul>
<p><span style="font-weight:600">Discussion:</span></p>
<p>This class provides us with a rudimentary way of activating
generators embedded inside a class, adding them to a runqueue and then
letting something run them. So let's try it. The default microprocess is
relatively boring, so let's create some microprocesses that are little
more than an age old program that repeatedly displays a messae. To do
that we declare a class subclassing microprocess and provide a generator
called main. We'll also capture a provided argument:</p>
<p>Note that this generator doesn't ever exit. We can then create a
couple of these printers:</p>
<p>Next we can create a scheduler:</p>
<p>We can then ask this scheduler to activate the two microprocesses - X
&amp; Y :</p>
<p>We can then run our scheduler by iterating through its main
method:</p>
<p>If we run this we get the following output (middle of output
snipped):</p>
<p>As you can see, the scheduler hits the 100th iteration and then
halts.</p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
