<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | <a href="/About.html">About</a> | <a href="/Developers.html">Developers</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<p><span style="font-size:11pt;font-weight:600">5<span id="Postman"></span> Postman - A Microprocess that performs deliveries!</span></p>
<p>Given we have outboxes and inboxes, it makes sense to have something that can handle deliveries between the two. For the purpose of this exercise, we'll create a microprocess that can look at a single outbox for a single component, take any messages deposited there and pass them the an inbox of another component. In terms of the component implementation so far we can use <span style="font-family:Courier;font-weight:600">dataReady</span> to check for availability of messages, <span style="font-family:Courier;font-weight:600">recv</span> to collect the message from the outbox, and <span style="font-family:Courier;font-weight:600">send</span> to deliver the message to the recipient inbox.</p>
<p><span style="font-weight:600">Exercise:</span> Write a class called <span style="font-family:Courier;font-weight:600">postman</span> that subclasses <span style="font-family:Courier">microprocess</span> with the following...</p>
<p>Attributes:</p>
<ul>
<li><span style="font-family:Courier">self.source</span> - this should refer to the source component (expected type is to be a component)</li>
<li><span style="font-family:Courier">self.sourcebox</span> - this should refer to the name of the source component's outbox to check. eg "outbox"</li>
<li><span style="font-family:Courier">self.sink</span> - - this should refer to the destination (sink) component (expected type is to be a component)</li>
<li><span style="font-family:Courier">self.sinkbox</span> - this should refer to the name of the sink component's inbox to check. eg "inbox"</li>
</ul>
<p>Behaviour: (methods)</p>
<p><span style="font-family:Courier">__init__(self, source, sourcebox, sink, sinkbox)</span><br />
This should perform the following initialisation:</p>
<ul>
<li>Call the super class initialiser (<span style="font-weight:600">Hint:</span> keyword "super" in python docs, and pydoc)</li>
<li>set the attributes listed above :-)</li>
</ul>
<p><span style="font-family:Courier">main(self)</span><br />
This implements the behaviour described above:</p>
<p>In a loop</p>
<ul>
<li>yield control back periodically (eg <span style="font-family:Courier">yield 1</span> is sufficient)</li>
<li>Check to see if <span style="font-family:Courier">data</span> is <span style="font-family:Courier">Ready</span> on the <span style="font-family:Courier">source</span> component's <span style="font-family:Courier">sourcebox</span>.</li>
<li>If there is <span style="font-family:Courier">recv</span> the data from that box, and <span style="font-family:Courier">send</span> it to the <span style="font-family:Courier">sink</span> component's <span style="font-family:Courier">sinkbox</span>.</li>
</ul>
<p><strong><a href="/MiniAxon/Postman?template=veryplain">Answer Hidden</a></strong></p>
<p><strong><a href="/MiniAxon/Postman?template=veryplain&amp;pat=2">Show Answer</a></strong></p>
<p><span style="font-weight:600">Answer:</span></p>
<ul>
<li>Select from the above tabs to show the answer!</li>
</ul>
<p><span style="font-weight:600">Discussion:</span></p>
<p>Given this, we can now start building interesting systems. We have mechanisms for enabling concurrency in a single process (microprocess &amp; scheduler), a mechanism for adding communications (postboxes) to a microprocess (component) and a mechanism for enabling deliveries between components. Whilst we (the Kamaelia team) can see from an optimised version that the postman can actually be optimised out of the system, this simple mini-axon shows the core elements of Kamaelia quite nearly in a microcosm.</p>
<p>One full version of this mini-axon can be found here: <a href="http://kamaelia.sourceforge.net/MiniAxonFull.html">Mini Axon Full</a>, which should now be clear what it's doing how and why.</p>
<p>A simple example we can now create is a trivial system with one component creating some data and sending it to another one for display.</p>
<p>Running the above system then results in the following output:</p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
