<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | <a href="/About.html">About</a> | <a href="/Developers.html">Developers</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<div class="container">
<h1 id="kamaelia.device.dvb.parse.parsetimeanddatetable"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Device.html" class="reference">Device</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.html" class="reference">DVB</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.Parse.html" class="reference">Parse</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ParseTimeAndDateTable.html" class="reference">ParseTimeAndDateTable</a></h1>
<section>
<div class="container">
<ul>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ParseTimeAndDateTable.ParseTimeAndDateTable.html" class="reference">ParseTimeAndDateTable</a></strong></li>
</ul>
</div>
<ul>
<li><a href="#484" class="reference">Parsing Time And Date Tables in DVB streams</a>
<ul>
<li><a href="#485" class="reference">Example Usage</a></li>
<li><a href="#486" class="reference">Behaviour</a></li>
</ul></li>
</ul>
</section>
<h1 id="parsing-time-and-date-tables-in-dvb-streams-484">Parsing Time And Date Tables in DVB streams {#484}</h1>
<p>ParseTimeAndDateTable parses a reconstructed PSI table from a DVB MPEG Transport Stream, and outputs the current time and date in UTC (GMT).</p>
<p>The purpose of the TDT and details of the fields within in are defined in the DVB SI specification:</p>
<ul>
<li>ETSI EN 300 468 "Digital Video Broadcasting (DVB); Specification for Service Information (SI) in DVB systems" ETSI / EBU (DVB group)</li>
</ul>
<p>The Time Offset Table (TOT) additionally contains information on the current (and next) timezone offset that applies, as well as duplicating the datetime information. See ParseTimeOffsetTable component.</p>
<h2 id="example-usage-485"><span id="example-usage">Example Usage</span> {#485}</h2>
<p>A simple pipeline to receive, parse and display the Time and Date Table:</p>
<pre class="literal-block"><code>FREQUENCY = 505.833330
feparams = {
    &quot;inversion&quot; : dvb3.frontend.INVERSION_AUTO,
    &quot;constellation&quot; : dvb3.frontend.QAM_16,
    &quot;code_rate_HP&quot; : dvb3.frontend.FEC_3_4,
    &quot;code_rate_LP&quot; : dvb3.frontend.FEC_3_4,
}

TDT_PID = 0x14

Pipeline( DVB_Multiplex(FREQUENCY, [TDT_PID], feparams),
          DVB_Demuxer({ TDT_PID:[&quot;outbox&quot;]}),
          ReassemblePSITables(),
          ParseTimeAndDateTable(),
          PrettifyTimeAndDateTable(),
          ConsoleEchoer(),
        ).run()</code></pre>
<p>The output will look like this:</p>
<pre class="literal-block"><code>[2006, 12, 21, 15, 1, 3]
[2006, 12, 21, 15, 1, 4]
[2006, 12, 21, 15, 1, 5]
[2006, 12, 21, 15, 1, 6]

.....</code></pre>
<h2 id="behaviour-486"><span id="behaviour">Behaviour</span> {#486}</h2>
<p>Send reconstructed PSI table 'sections' to the "inbox" inbox. When all sections of the table have arrived, ParseServiceDescriptionTable will parse the table and send it out of its "outbox" outbox.</p>
<p>The table is output every time it is received. In practice a multiplex is likely to transmit about 1 instance of this table per second, giving a reasonably accurate measure of the current time.</p>
<p>The value output is a simple list/tuple describing the current UTC (GMT) date and time, in the form (year,month,day,hour,minute,second).</p>
<p>For example: 21st December 2006 15:01:03 GMT is represented as:</p>
<pre class="literal-block"><code>[2006, 12, 21, 15, 1, 3]</code></pre>
<p>If this data is sent on through a PrettifyTimeAndDateTable component, then the equivalent output is a string of the following form:</p>
<pre class="literal-block"><code>TDT received:
   UTC Date now (y,m,d) : 2006 12 21
   UTC Time now (h,m,s) : 15:01:03</code></pre>
<p>If a shutdownMicroprocess or producerFinished message is received on the "control" inbox, then it will immediately be sent on out of the "signal" outbox and the component will then immediately terminate.</p>
<hr />
<h1 id="kamaelia.device.dvb.parse.parsetimeanddatetable.parsetimeanddatetable"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Device.html" class="reference">Device</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.html" class="reference">DVB</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.Parse.html" class="reference">Parse</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ParseTimeAndDateTable.html" class="reference">ParseTimeAndDateTable</a>.<a href="/Components/pydoc/Kamaelia.Device.DVB.Parse.ParseTimeAndDateTable.ParseTimeAndDateTable.html" class="reference">ParseTimeAndDateTable</a></h1>
<h2 id="symbol-ParseTimeAndDateTable">class ParseTimeAndDateTable(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>ParseTimeAndDateTable() -&gt; new ParseTimeAndDateTable component.</p>
<p>Send reconstructed PSI table sections to the "inbox" inbox. When a complete table is assembled and parsed, the result is sent out of the "outbox" outbox in the form [year,month,day,hour,minute,second]. The times are UTC (GMT).</p>
<h3 id="inboxes"><span id="symbol-ParseTimeAndDateTable.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shutdown signalling</li>
<li><strong>inbox</strong> : DVB PSI Packets from a single PID containing a TDT table</li>
</ul>
<h3 id="outboxes"><span id="symbol-ParseTimeAndDateTable.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : Current date and time (UTC)</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
<h3 id="methods-defined-here">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self"><span id="symbol-ParseTimeAndDateTable.__init__">__init__(self)</span></h4>
<h4 id="mainself"><span id="symbol-ParseTimeAndDateTable.main">main(self)</span></h4>
<h4 id="shutdownself"><span id="symbol-ParseTimeAndDateTable.shutdown">shutdown(self)</span></h4>
<section>

</section>
</div>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer? Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701" class="reference">here</a> in reply to the documentation thread in the Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</em></p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
