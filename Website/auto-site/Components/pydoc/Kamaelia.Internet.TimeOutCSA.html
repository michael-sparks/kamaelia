<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>March 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<div class="container">
<h1 id="kamaelia.internet.timeoutcsa"><a
href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a
href="/Components/pydoc/Kamaelia.Internet.html"
class="reference">Internet</a>.<a
href="/Components/pydoc/Kamaelia.Internet.TimeOutCSA.html"
class="reference">TimeOutCSA</a></h1>
<section>
<div class="container">

</div>
<ul>
<li><a href="#125" class="reference">ResettableSender</a>
<ul>
<li><a href="#126" class="reference">Example Usage</a></li>
<li><a href="#127" class="reference">More detail</a></li>
</ul></li>
<li><a href="#128" class="reference">ActivityMonitor</a>
<ul>
<li><a href="#129" class="reference">Example Usage</a></li>
<li><a href="#130" class="reference">Usage</a></li>
<li><a href="#131" class="reference">More detail</a></li>
</ul></li>
</ul>
</section>
<section>
<p>This module provides a set of components and convienience functions
for making a CSA time out. To use it, simply call the function
InactivityChassis with a timeout period and the CSA to wrap. This will
send a producerFinished signal to the CSA if it does not send a message
on its outbox or CreatorFeedback boxes before the timeout expires.</p>
<h2 id="125"><span id="resettablesender">ResettableSender</span></h2>
<p>This component is a simple way of makinga timeout event occur. If it
receives nothing after 5 seconds, a "NEXT" message is sent.</p>
<h3 id="126"><span id="example-usage">Example Usage</span></h3>
<p>A tcp client that connects to a given host and port and prints and
expects to receive <em>something</em> at more frequent than 5 seconds
intervals. If it does not, it prints a rude message the first time this
happens:</p>
<pre class="literal-block"><code>Pipeline(
    TCPClient(HOST, PORT),
    ResettableSender(),
    PureTransformer(lambda x : &quot;Oi, wake up. I have received nothing for 5 seconds!&quot;),
    ConsoleEchoer(),
    ).run()</code></pre>
<h3 id="127"><span id="more-detail">More detail</span></h3>
<p>By default, ResettableSender is set up to send a timeout message
"NEXT" out of its "outbox" outbox within 5 seconds. However, if it
receives any message on its "inbox" inbox then the timer is reset.</p>
<p>Once the timeout has occurred this component terminates. It will
therefore only ever generate one "NEXT" message, even if multiple
timeouts occur.</p>
<p>Termination is silent - no messages to indicate shutdown are sent out
of the "signal" outbox. This component ignores any input on its
"control" inbox - including shutdown messages.</p>
<h2 id="128"><span id="activitymonitor">ActivityMonitor</span></h2>
<p>ActivityMonitor monitors up to four streams of messages passing
through it and, in response, sends messages out of its "observed" outbox
to indicate that there has been activity.</p>
<p>This is intended to wrap a component such that it may be monitored by
another component.</p>
<h3 id="129"><span id="id1">Example Usage</span></h3>
<p>Type a line at the console, and your activity will be 'observed' - a
'RESET' message will appear as well as the line you have typed:</p>
<pre class="literal-block"><code>Graphline(
   MONITOR = ActivityMonitor(),
   OUTPUT  = ConsoleEchoer(),
   INPUT   = ConsoleReader(),
   linkages = {
       (&quot;INPUT&quot;,   &quot;outbox&quot;) : (&quot;MONITOR&quot;, &quot;inbox&quot;),
       (&quot;MONITOR&quot;, &quot;outbox&quot;) : (&quot;OUTPUT&quot;, &quot;inbox&quot;),

       (&quot;MONITOR&quot;, &quot;observed&quot;) : (&quot;OUTPUT&quot;, &quot;inbox&quot;),
   }
).run()</code></pre>
<h3 id="130"><span id="usage">Usage</span></h3>
<p>To use it, connect any of the three inboxes to outboxes on the
component to be monitored.</p>
<p>The messages that are sent to those inboxes will be forwarded to
their respective outbox. For example, suppose "HELLO" was received on
'inbox2'. self.message ("RESET" by default) will be sent on the
'observed' outbox and "HELLO" will be sent out on 'outbox2'.</p>
<p>ActivityMonitor will shut down upon receiving a producerFinished or
shutdownCSA message on its control inbox.</p>
<p>Please note that this can't wrap adaptive components properly as of
yet.</p>
<h3 id="131"><span id="id2">More detail</span></h3>
<p>Any message sent to the "inbox", "inbox2", "inbox3" or "control"
inboxes are immediately forwarded on out of the "outbox", "outbox2",
"outbox3" or "signal" outboxes respectively.</p>
<p>Whenever this happens, a "RESET" message (the default) is sent out of
the "observed" outbox.</p>
<p>For every batch of messages waiting at the three inboxes that get
forwarded on out of their respective outboxes, <em>only one</em> "RESET"
message will be sent. This should therefore only be used as a general
indication of activity, not as a means of counting every individual
message passing through this component.</p>
<p>Any message sent to the "control" inbox is also checked to see if it
is a shutdownCSA or producerFinished message. If it is one of these then
it will still be forwarded on out of the "signal" outbox, but will also
cause ActivityMonitor to immediately terminate.</p>
<p>Any messages waiting at any of the inboxes (including the "control"
inbox) at the time the shutdown triggering message is received will be
sent on before termination.</p>
</section>
<hr />
<section>

</section>
</div>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be
clearer? Want to help improve it? Constructive criticism is very welcome
- especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a
href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701"
class="reference">here</a> in reply to the documentation thread in the
Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38
UTC/GMT</em></p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
