<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | <a href="/About.html">About</a> | <a href="/Developers.html">Developers</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<div class="container">
<h1 id="kamaelia.experimental.erparsing"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Experimental.html" class="reference">Experimental</a>.<a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.html" class="reference">ERParsing</a></h1>
<section>
<div class="container">
<ul>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERModel2Visualiser.html" class="reference">ERModel2Visualiser</a></strong></li>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERParser.html" class="reference">ERParser</a></strong></li>
</ul>
</div>
<ul>
<li><a href="#566" class="reference">Parser components for Entity-Relationship data</a>
<ul>
<li><a href="#567" class="reference">Example Usage:</a></li>
<li><a href="#568" class="reference">ERParser Behaviour</a></li>
<li><a href="#569" class="reference">ERModel2Visualiser Behaviour</a></li>
<li><a href="#570" class="reference">Entity-Relationship textual description format</a></li>
<li><a href="#571" class="reference">Parsed Entity-Relationship data</a></li>
</ul></li>
</ul>
</section>
<h1 id="parser-components-for-entity-relationship-data-566">Parser components for Entity-Relationship data {#566}</h1>
<p>ERParser parses and buffers lines of text containing entity-relationship data. Once a shutdown message is received, it emits the parsed data as a list of entities and relationships.</p>
<p>ERModel2Visualiser transforms parsed entity-relationship data into textual commands for the TopologyViewer component to produce a visualisation. The TopologyViewer must be configured with suitable particle types - such as <a href="/Components/pydoc/Kamaelia.Visualisation.ER.ERVisualiserServer.ERVisualiser.html" class="reference">Kamaelia.Visualisation.ER.ERVisualiserServer.ERVisualiser</a></p>
<p>See: <a href="/Components/pydoc/Kamaelia.Visualisation.PhysicsGraph.TopologyViewer.TopologyViewer.html" class="reference">Kamaelia.Visualisation.PhysicsGraph.TopologyViewer.TopologyViewer</a></p>
<h2 id="example-usage-567"><span id="example-usage">Example Usage:</span> {#567}</h2>
<p>A simple pipeline that reads in entity-relationship data from a file and writes out commands, suitable for a topology visualiser, to the console:</p>
<pre class="literal-block"><code>from Kamaelia.File.ReadFileAdaptor import ReadFileAdaptor
from Kamaelia.Util.PureTransformer import PureTransformer
from Kamaelia.Util.Console import ConsoleEchoer

Pipeline(
    ReadFileAdaptor(entity_relationship_data_file),
    ERParser(),
    ERModel2Visualiser(),
    PureTransformer(lambda x: pprint.pformat(x)+&quot;\n&quot;),
    ConsoleEchoer(),
).run()</code></pre>
<p>Provide the following file of entity relationship data:</p>
<pre class="literal-block"><code>#
# entity relationship data in this file!
#

entity Artist:
    simpleattributes artisticname genre

entity Manager:
    simpleattributes ID name1 telephone

entity ContractInfo:
    simpleattributes contractID data_from data_to duration1

entity MasterTrack:
    simpleattributes trackID working_title duration2

entity SoundEngineer:
    simpleattributes sound_eng_ID name2

entity FinishedTrack:
    simpleattributes version final_duration released_title

entity Album:
    simpleattributes album_ID title

relation ManagedBy(Artist,Manager)
relation HasContract(Artist,ContractInfo)
relation RecordedBy(MasterTrack,Artist)
relation EditedBy(SoundEngineer,MasterTrack)
relation OriginatesFrom(FinishedTrack,MasterTrack)
relation GroupedOn(FinishedTrack,Album)
relation CreatedBy(Album,Artist)</code></pre>
<p>Once the ReadFileAdaptor component has finished reading and terminates, the ERParser component sends a message, containing the following, out of its "outbox" outbox:</p>
<pre class="literal-block"><code>[[&#39;entity&#39;, {&#39;name&#39;: &#39;Artist&#39;, &#39;simpleattributes&#39;: [&#39;artisticname&#39;, &#39;genre&#39;]}],
 [&#39;entity&#39;,
  {&#39;name&#39;: &#39;Manager&#39;, &#39;simpleattributes&#39;: [&#39;ID&#39;, &#39;name1&#39;, &#39;telephone&#39;]}],
 [&#39;entity&#39;,
  {&#39;name&#39;: &#39;ContractInfo&#39;,
   &#39;simpleattributes&#39;: [&#39;contractID&#39;, &#39;data_from&#39;, &#39;data_to&#39;, &#39;duration1&#39;]}],
 [&#39;entity&#39;,
  {&#39;name&#39;: &#39;MasterTrack&#39;,
   &#39;simpleattributes&#39;: [&#39;trackID&#39;, &#39;working_title&#39;, &#39;duration2&#39;]}],
 [&#39;entity&#39;,
  {&#39;name&#39;: &#39;SoundEngineer&#39;, &#39;simpleattributes&#39;: [&#39;sound_eng_ID&#39;, &#39;name2&#39;]}],
 [&#39;entity&#39;,
  {&#39;name&#39;: &#39;FinishedTrack&#39;,
   &#39;simpleattributes&#39;: [&#39;version&#39;, &#39;final_duration&#39;, &#39;released_title&#39;]}],
 [&#39;entity&#39;, {&#39;name&#39;: &#39;Album&#39;, &#39;simpleattributes&#39;: [&#39;album_ID&#39;, &#39;title&#39;]}],
 [&#39;relation&#39;, {&#39;entities&#39;: [&#39;Artist&#39;, &#39;Manager&#39;], &#39;name&#39;: &#39;ManagedBy&#39;}],
 [&#39;relation&#39;, {&#39;entities&#39;: [&#39;Artist&#39;, &#39;ContractInfo&#39;], &#39;name&#39;: &#39;HasContract&#39;}],
 [&#39;relation&#39;, {&#39;entities&#39;: [&#39;MasterTrack&#39;, &#39;Artist&#39;], &#39;name&#39;: &#39;RecordedBy&#39;}],
 [&#39;relation&#39;,
  {&#39;entities&#39;: [&#39;SoundEngineer&#39;, &#39;MasterTrack&#39;], &#39;name&#39;: &#39;EditedBy&#39;}],
 [&#39;relation&#39;,
  {&#39;entities&#39;: [&#39;FinishedTrack&#39;, &#39;MasterTrack&#39;], &#39;name&#39;: &#39;OriginatesFrom&#39;}],
 [&#39;relation&#39;, {&#39;entities&#39;: [&#39;FinishedTrack&#39;, &#39;Album&#39;], &#39;name&#39;: &#39;GroupedOn&#39;}],
 [&#39;relation&#39;, {&#39;entities&#39;: [&#39;Album&#39;, &#39;Artist&#39;], &#39;name&#39;: &#39;CreatedBy&#39;}]]</code></pre>
<p>And the following is output from the console:</p>
<pre class="literal-block"><code>&#39;ADD NODE Artist Artist auto entity&#39;
&#39;ADD NODE artisticname artisticname auto attribute&#39;
&#39;ADD NODE genre genre auto attribute&#39;
&#39;ADD NODE Manager Manager auto entity&#39;
&#39;ADD NODE ID ID auto attribute&#39;
&#39;ADD NODE name1 name1 auto attribute&#39;
&#39;ADD NODE telephone telephone auto attribute&#39;
&#39;ADD NODE ContractInfo ContractInfo auto entity&#39;
&#39;ADD NODE contractID contractID auto attribute&#39;
&#39;ADD NODE data_from data_from auto attribute&#39;
&#39;ADD NODE data_to data_to auto attribute&#39;
&#39;ADD NODE duration1 duration1 auto attribute&#39;
&#39;ADD NODE MasterTrack MasterTrack auto entity&#39;
&#39;ADD NODE trackID trackID auto attribute&#39;
&#39;ADD NODE working_title working_title auto attribute&#39;
&#39;ADD NODE duration2 duration2 auto attribute&#39;
&#39;ADD NODE SoundEngineer SoundEngineer auto entity&#39;
&#39;ADD NODE sound_eng_ID sound_eng_ID auto attribute&#39;
&#39;ADD NODE name2 name2 auto attribute&#39;
&#39;ADD NODE FinishedTrack FinishedTrack auto entity&#39;
&#39;ADD NODE version version auto attribute&#39;
&#39;ADD NODE final_duration final_duration auto attribute&#39;
&#39;ADD NODE released_title released_title auto attribute&#39;
&#39;ADD NODE Album Album auto entity&#39;
&#39;ADD NODE album_ID album_ID auto attribute&#39;
&#39;ADD NODE title title auto attribute&#39;
&#39;ADD NODE ManagedBy ManagedBy auto relation&#39;
&#39;ADD NODE HasContract HasContract auto relation&#39;
&#39;ADD NODE RecordedBy RecordedBy auto relation&#39;
&#39;ADD NODE EditedBy EditedBy auto relation&#39;
&#39;ADD NODE OriginatesFrom OriginatesFrom auto relation&#39;
&#39;ADD NODE GroupedOn GroupedOn auto relation&#39;
&#39;ADD NODE CreatedBy CreatedBy auto relation&#39;
&#39;ADD LINK Artist artisticname&#39;
&#39;ADD LINK Artist genre&#39;
&#39;ADD LINK Manager ID&#39;
&#39;ADD LINK Manager name1&#39;
&#39;ADD LINK Manager telephone&#39;
&#39;ADD LINK ContractInfo contractID&#39;
&#39;ADD LINK ContractInfo data_from&#39;
&#39;ADD LINK ContractInfo data_to&#39;
&#39;ADD LINK ContractInfo duration1&#39;
&#39;ADD LINK MasterTrack trackID&#39;
&#39;ADD LINK MasterTrack working_title&#39;
&#39;ADD LINK MasterTrack duration2&#39;
&#39;ADD LINK SoundEngineer sound_eng_ID&#39;
&#39;ADD LINK SoundEngineer name2&#39;
&#39;ADD LINK FinishedTrack version&#39;
&#39;ADD LINK FinishedTrack final_duration&#39;
&#39;ADD LINK FinishedTrack released_title&#39;
&#39;ADD LINK Album album_ID&#39;
&#39;ADD LINK Album title&#39;
&#39;ADD LINK Artist ManagedBy&#39;
&#39;ADD LINK Manager ManagedBy&#39;
&#39;ADD LINK Artist HasContract&#39;
&#39;ADD LINK ContractInfo HasContract&#39;
&#39;ADD LINK MasterTrack RecordedBy&#39;
&#39;ADD LINK Artist RecordedBy&#39;
&#39;ADD LINK SoundEngineer EditedBy&#39;
&#39;ADD LINK MasterTrack EditedBy&#39;
&#39;ADD LINK FinishedTrack OriginatesFrom&#39;
&#39;ADD LINK MasterTrack OriginatesFrom&#39;
&#39;ADD LINK FinishedTrack GroupedOn&#39;
&#39;ADD LINK Album GroupedOn&#39;
&#39;ADD LINK Album CreatedBy&#39;
&#39;ADD LINK Artist CreatedBy&#39;</code></pre>
<h2 id="erparser-behaviour-568"><span id="erparser-behaviour">ERParser Behaviour</span> {#568}</h2>
<p>Send entity-relationship textual description data to the "inbox" inbox as individual strings, one line per string.</p>
<p>When a producerFinished or shutdownMicroprocess is sent to the "control" inbox this component sends out a single message containing, as a list, the entities and relationships parsed from the data.</p>
<p>ERParser then immediately terminates and sends out the shudown message it received out of its "signal" outbox.</p>
<p>See description of "Entity-Relationship textual description format" and "Parsed Entity-Relationship data".</p>
<h2 id="ermodel2visualiser-behaviour-569"><span id="ermodel2visualiser-behaviour">ERModel2Visualiser Behaviour</span> {#569}</h2>
<p>Send parsed entity-relationship data to the "inbox" inbox.</p>
<p>When a producerFinished or shutdownMicroprocess is sent to the "control" inbox this component transforms it into a set of textual (string) commands suitable for a TopologyViewer component and sends it out of its "outbox" outbox in two messages. The first contains the commands to create the required nodes and the second contains the commands to create the linkages between them.</p>
<p>ERModel2Visualiser then immediately terminates and sends out the shudown message it received out of its "signal" outbox.</p>
<p>The TopologyViewer component that receives the commands must be configured to know the following node types:</p>
<ul>
<li>entity -- represents an entity</li>
<li>relation -- represents the mid-point and name label of a relation</li>
<li>attribute -- represents an attribute of an entity</li>
<li>isa -- represents the mid-point and label of a subtype-supertype relation</li>
</ul>
<p>See description of "Parsed Entity-Relationship data".</p>
<h2 id="entity-relationship-textual-description-format-570"><span id="entity-relationship-textual-description-format">Entity-Relationship textual description format</span> {#570}</h2>
<p>Entity relationship data is expressed as a text file. Blank lines or lines beginning with a '#' character are ignored.</p>
<p>Define entities by writing entity NAME: on its own line, without indentation. To define attributes for an entity, write, indented, on the next line, simpleattributes followed by a space separated list of attributes.</p>
<p>To make an entity a subtype of another entity, begin the entity declaration instead with entity NAME(SUPERTYPE):.</p>
<p>Example entities:</p>
<pre class="literal-block"><code>entity person:
    simpleattributes female name=sarah

# the following entities are subtypes of the &#39;person&#39; entity

entity mum(person):

entity daughter(person):

entity son(person):</code></pre>
<p>To define relations, write relation RELATION_NAME(ENTITY,ENTITY,...) on its own line without indentation. A relation must involve two or more entities. For example:</p>
<pre class="literal-block"><code>relation RelatedTo(mum,daughter,son)
relation siblings(son,daughter)</code></pre>
<h2 id="parsed-entity-relationship-data-571"><span id="parsed-entity-relationship-data">Parsed Entity-Relationship data</span> {#571}</h2>
<p>The parsed data takes the form of a list of entities and relations.</p>
<p>An entity is represented as a list beginning with the string "entity", followed by a dictionary defining attributes. The key "name" maps to the name of the entity:</p>
<blockquote>
<p>[ "entity", { "name": &lt;name&gt;, "simpleattributes": [ &lt;attribute&gt;, &lt;attribute&gt;, ... ], "subtype": &lt;supertype-name&gt; ]</p>
</blockquote>
<p>The key "simpleattributes", if present, maps to a list containing, as strings each attribute.</p>
<p>Some may also contain a "subtype" key which maps to the name of the entity that this one is a subtype of.</p>
<p>For example:</p>
<pre class="literal-block"><code>[ &quot;entity&quot;,
  { &quot;name&quot;             : &quot;person&quot;,
    &quot;simpleattributes&quot; : [ &quot;female&quot;, &quot;name=sarah&quot; ]
  }
]

[ &quot;entity&quot;,
  { &quot;name&quot; : &quot;mum&quot;,
    &quot;subtype&quot; : &quot;person&quot;
  }
]</code></pre>
<p>A relation is represented as a list beginning with the string "relation", followed by a dictionary defining attributes:</p>
<blockquote>
<p>[ "relation", { "name": &lt;name&gt;, "entities": [ &lt;entity-name&gt;, &lt;entity-name&gt;, ... ]</p>
</blockquote>
<p>The key "name" maps to the name of the entity. The key "entities" maps to a list containing, as strings, the names of the entities involved in the relation. For example:</p>
<pre class="literal-block"><code>[ &quot;relation&quot;,
  { &quot;name&quot;     : &quot;IsA&quot;,
    &quot;entities&quot; : [ &quot;mum&quot;, &quot;person&quot; ]
  }
]</code></pre>
<hr />
<section>
<h1 id="kamaelia.experimental.erparsing.ermodel2visualiser"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Experimental.html" class="reference">Experimental</a>.<a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.html" class="reference">ERParsing</a>.<a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERModel2Visualiser.html" class="reference">ERModel2Visualiser</a></h1>
<h2 id="symbol-ERModel2Visualiser">class ERModel2Visualiser(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>ERModel2Visualiser() -&gt; new ERModel2Visualiser component.</p>
<p>Send parsed entity-relationship data as lists of entities and relations to the "inbox" inbox. Once shutdown, sends out commands to drive a TopologyViewer component to produce a visualisation of the described entities and relations.</p>
<h3 id="inboxes"><span id="symbol-ERModel2Visualiser.Inboxes">Inboxes</span></h3>
<h3 id="outboxes"><span id="symbol-ERModel2Visualiser.Outboxes">Outboxes</span></h3>
<h3 id="methods-defined-here">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="mainself"><span id="symbol-ERModel2Visualiser.main">main(self)</span></h4>
<h4 id="shutdownself"><span id="symbol-ERModel2Visualiser.shutdown">shutdown(self)</span></h4>
<section>

</section>
<h1 id="kamaelia.experimental.erparsing.erparser"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Experimental.html" class="reference">Experimental</a>.<a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.html" class="reference">ERParsing</a>.<a href="/Components/pydoc/Kamaelia.Experimental.ERParsing.ERParser.html" class="reference">ERParser</a></h1>
<h2 id="symbol-ERParser">class ERParser(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>ERParser() -&gt; new ERParser component.</p>
<p>Parses lines of Entity-Relationship data, send to the "inbox" inbox as strings. Once shutdown, sends out a list of parsed entity and relationship data.</p>
<h3 id="inboxes-1"><span id="symbol-ERParser.Inboxes">Inboxes</span></h3>
<h3 id="outboxes-1"><span id="symbol-ERParser.Outboxes">Outboxes</span></h3>
<h3 id="methods-defined-here-1">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="mainself-1"><span id="symbol-ERParser.main">main(self)</span></h4>
<h4 id="shutdownself-1"><span id="symbol-ERParser.shutdown">shutdown(self)</span></h4>
<section>

</section>
</section>
</div>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer? Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701" class="reference">here</a> in reply to the documentation thread in the Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</em></p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
