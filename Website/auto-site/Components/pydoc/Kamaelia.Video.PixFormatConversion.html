<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<div class="container">
<h1 id="kamaelia.video.pixformatconversion"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Video.html" class="reference">Video</a>.<a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.html" class="reference">PixFormatConversion</a></h1>
<section>
<div class="container">
<ul>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.ToRGB_interleaved.html" class="reference">ToRGB_interleaved</a></strong></li>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.ToYUV420_planar.html" class="reference">ToYUV420_planar</a></strong></li>
</ul>
</div>
<ul>
<li><a href="#672" class="reference">Converting the pixel format of video frames</a>
<ul>
<li><a href="#673" class="reference">Example Usage</a></li>
<li><a href="#674" class="reference">Which component for which conversion?</a></li>
<li><a href="#675" class="reference">More details</a></li>
</ul></li>
</ul>
</section>
<h1 id="converting-the-pixel-format-of-video-frames-672">Converting the pixel format of video frames {#672}</h1>
<p>These components convert the pixel format of video frames, for example, from interleaved RGB to planar YUV 420.</p>
<h2 id="example-usage-673"><span id="example-usage">Example Usage</span> {#673}</h2>
<p>Decoding a Dirac encoded video file, then converting it to RGB for display on a pygame display surface:</p>
<pre class="literal-block"><code>Pipeline( RateControlledFileReader(&quot;video.drc&quot;,readmode=&quot;bytes&quot;, rate=100000),
          DiracDecoder(),
          ToRGB_interleaved(),
          VideoSurface(),
        ).run()</code></pre>
<h2 id="which-component-for-which-conversion-674"><span id="which-component-for-which-conversion">Which component for which conversion?</span> {#674}</h2>
<p>The components here are currently capable of the following pixel format conversions:</p>
<table style="width:97%;">
<colgroup>
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">From</th>
<th style="text-align: left;">To</th>
<th style="text-align: left;">Which component?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">"RGB_interleaved"</td>
<td style="text-align: left;">"RGB_interleaved"</td>
<td style="text-align: left;">ToRGB_interleaved</td>
</tr>
<tr class="even">
<td style="text-align: left;">"YUV420_planar"</td>
<td style="text-align: left;">"RGB_interleaved"</td>
<td style="text-align: left;">ToRGB_interleaved</td>
</tr>
<tr class="odd">
<td style="text-align: left;">"YUV422_planar"</td>
<td style="text-align: left;">"RGB_interleaved"</td>
<td style="text-align: left;">ToRGB_interleaved</td>
</tr>
<tr class="even">
<td style="text-align: left;">"RGB_interleaved"</td>
<td style="text-align: left;">"YUV420_planar"</td>
<td style="text-align: left;">ToYUV420_planar</td>
</tr>
<tr class="odd">
<td style="text-align: left;">"YUV420_planar"</td>
<td style="text-align: left;">"YUV420_planar"</td>
<td style="text-align: left;">ToYUV420_planar</td>
</tr>
</tbody>
</table>
<h2 id="more-details-675"><span id="more-details">More details</span> {#675}</h2>
<p>Send video frames to the "inbox" inbox of these components. They will be converted to the destination pixel format and sent out of the "outbox" outbox. Video frames are dictionaries, they must have the following keys:</p>
<blockquote>
<ul>
<li>"rgb" or "yuv" -- containing the pixel data</li>
<li>"pixformat" -- the pixel format</li>
<li>"size" -- (width,height) in pixels</li>
</ul>
</blockquote>
<p>Any other fields will be transparently passed through, unmodified.</p>
<p>These components support sending data out of its outbox to a size limited inbox. If the size limited inbox is full, these components will pause until able to send out the data. Data will not be consumed from the inbox if these components are waiting to send to the outbox.</p>
<p>If a producerFinished message is received on the "control" inbox, these components will complete converting and frames pending in its inbox, and finish sending any resulting data to its outbox. They will then send the producerFinished message on out of its "signal" outbox and terminate.</p>
<p>If a shutdownMicroprocess message is received on the "control" inbox, these components will immediately send it on out of its "signal" outbox and immediately terminate. It will not complete processing, or sending on any pending data.</p>
<hr />
<section>
<h1 id="kamaelia.video.pixformatconversion.torgb_interleaved"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Video.html" class="reference">Video</a>.<a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.html" class="reference">PixFormatConversion</a>.<a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.ToRGB_interleaved.html" class="reference">ToRGB_interleaved</a></h1>
<h2 id="symbol-ToRGB_interleaved">class ToRGB_interleaved(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>" ToRGB_interleaved() -&gt; new ToRGB_interleaved component.</p>
<p>Converts video frames sent to its "inbox" inbox, to "RGB_interleaved" pixel format and sends them out of its "outbox"</p>
<p>Supports conversion from:</p>
<ul>
<li>YUV420_planar</li>
<li>YUV422_planar</li>
<li>RGB_interleaved (passthrough)</li>
</ul>
<h3 id="inboxes"><span id="symbol-ToRGB_interleaved.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shutdown signalling</li>
<li><strong>inbox</strong> : Video frame</li>
</ul>
<h3 id="outboxes"><span id="symbol-ToRGB_interleaved.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : RGB_interleaved pixel format video frame</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
<h3 id="methods-defined-here">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="canstopself"><span id="symbol-ToRGB_interleaved.canStop">canStop(self)</span></h4>
<h4 id="handlecontrolself"><span id="symbol-ToRGB_interleaved.handleControl">handleControl(self)</span></h4>
<h4 id="mainself"><span id="symbol-ToRGB_interleaved.main">main(self)</span></h4>
<p>Main loop.</p>
<h4 id="muststopself"><span id="symbol-ToRGB_interleaved.mustStop">mustStop(self)</span></h4>
<h4 id="waitsendself-data-boxname"><span id="symbol-ToRGB_interleaved.waitSend">waitSend(self, data, boxname)</span></h4>
<section>

</section>
<h1 id="kamaelia.video.pixformatconversion.toyuv420_planar"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Video.html" class="reference">Video</a>.<a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.html" class="reference">PixFormatConversion</a>.<a href="/Components/pydoc/Kamaelia.Video.PixFormatConversion.ToYUV420_planar.html" class="reference">ToYUV420_planar</a></h1>
<h2 id="symbol-ToYUV420_planar">class ToYUV420_planar(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>" ToYUV420_planar() -&gt; new ToYUV420_planar component.</p>
<p>Converts video frames sent to its "inbox" inbox, to "ToYUV420_planar" pixel format and sends them out of its "outbox"</p>
<p>Supports conversion from:</p>
<ul>
<li>RGB_interleaved</li>
<li>YUV420_planar (passthrough)</li>
</ul>
<h3 id="inboxes-1"><span id="symbol-ToYUV420_planar.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shutdown signalling</li>
<li><strong>inbox</strong> : Video frame</li>
</ul>
<h3 id="outboxes-1"><span id="symbol-ToYUV420_planar.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : YUV420_planar pixel format video frame</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
<h3 id="methods-defined-here-1">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="canstopself-1"><span id="symbol-ToYUV420_planar.canStop">canStop(self)</span></h4>
<h4 id="handlecontrolself-1"><span id="symbol-ToYUV420_planar.handleControl">handleControl(self)</span></h4>
<h4 id="mainself-1"><span id="symbol-ToYUV420_planar.main">main(self)</span></h4>
<p>Main loop.</p>
<h4 id="muststopself-1"><span id="symbol-ToYUV420_planar.mustStop">mustStop(self)</span></h4>
<h4 id="waitsendself-data-boxname-1"><span id="symbol-ToYUV420_planar.waitSend">waitSend(self, data, boxname)</span></h4>
<section>

</section>
</section>
</div>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer? Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701" class="reference">here</a> in reply to the documentation thread in the Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</em></p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
