<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<div class="container">
<h1 id="kamaelia.protocol.http.httpclient"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Protocol.html" class="reference">Protocol</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.html" class="reference">HTTP</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.html" class="reference">HTTPClient</a></h1>
<section>
<div class="container">
<ul>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.SimpleHTTPClient.html" class="reference">SimpleHTTPClient</a></strong></li>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.SingleShotHTTPClient.html" class="reference">SingleShotHTTPClient</a></strong></li>
</ul>
</div>
<ul>
<li><a href="#597" class="reference">Single-Shot HTTP Client</a>
<ul>
<li><a href="#598" class="reference">Example Usage</a></li>
<li><a href="#599" class="reference">How does it work?</a></li>
</ul></li>
<li><a href="#600" class="reference">Simple HTTP Client</a>
<ul>
<li><a href="#601" class="reference">Example Usage</a></li>
<li><a href="#602" class="reference">How does it work?</a></li>
</ul></li>
</ul>
</section>
<section>
<h2 id="single-shot-http-client-597"><span id="single-shot-http-client">Single-Shot HTTP Client</span> {#597}</h2>
<p>This component is for downloading a single file from an HTTP server. Pick up data received from the server on its "outbox" outbox.</p>
<p>Generally you should use SimpleHTTPClient in preference to this.</p>
<h3 id="example-usage-598"><span id="example-usage">Example Usage</span> {#598}</h3>
<p>How to use it:</p>
<pre class="literal-block"><code>Pipeline(
    SingleShotHTTPClient(&quot;http://www.google.co.uk/&quot;),
    SomeComponentThatUnderstandsThoseMessageTypes()
).run()</code></pre>
<p>If you want to use it directly, note that it doesn't output strings but ParsedHTTPHeader, ParsedHTTPBodyChunk and ParsedHTTPEnd like HTTPParser. This makes has the advantage of not buffering huge files in memory but outputting them as a stream of chunks. (with plain strings you would not know the contents of the headers or at what point that response had ended!)</p>
<h3 id="how-does-it-work-599"><span id="how-does-it-work">How does it work?</span> {#599}</h3>
<p>SingleShotHTTPClient accepts a URL parameter at its creation (to __init__). When activated it creates an HTTPParser instance and then connects to the webserver specified in the URL using a TCPClient component. It sends an HTTP request and then any response from the server is received by the HTTPParser.</p>
<p>HTTPParser processes the response and outputs it in parts as:</p>
<pre class="literal-block"><code>ParsedHTTPHeader,
ParsedHTTPBodyChunk,
ParsedHTTPBodyChunk,
...
ParsedHTTPBodyChunk,
ParsedHTTPEnd</code></pre>
<p>If SingleShotHTTPClient detects that the requested URL is a redirect page (using the Location header) then it begins this cycle anew with the URL of the new page, otherwise the parts of the page output by HTTPParser are sent on to "outbox".</p>
<h2 id="simple-http-client-600"><span id="simple-http-client">Simple HTTP Client</span> {#600}</h2>
<p>This component downloads the pages corresponding to HTTP URLs received on "inbox" and outputs their contents (file data) as a message, one per URL, to "outbox" in the order they were received.</p>
<h3 id="example-usage-601"><span id="id1">Example Usage</span> {#601}</h3>
<p>Type URLs, and they will be downloaded and placed, back to back in "downloadedfile.txt":</p>
<pre class="literal-block"><code>Pipeline(
    ConsoleReader(&quot;&gt;&gt;&gt; &quot;, &quot;&quot;),
    SimpleHTTPClient(),
    SimpleFileWriter(&quot;downloadedfile.txt&quot;),
).run()</code></pre>
<h3 id="how-does-it-work-602"><span id="id2">How does it work?</span> {#602}</h3>
<p>SimpleHTTPClient uses the Carousel component to create a new SingleShotHTTPClient component for every URL requested. As URLs are handled sequentially, it has only one SSHC child at anyone time.</p>
</section>
<hr />
<section>
<h1 id="kamaelia.protocol.http.httpclient.simplehttpclient"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Protocol.html" class="reference">Protocol</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.html" class="reference">HTTP</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.html" class="reference">HTTPClient</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.SimpleHTTPClient.html" class="reference">SimpleHTTPClient</a></h1>
<h2 id="symbol-SimpleHTTPClient">class SimpleHTTPClient(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<h3 id="inboxes"><span id="symbol-SimpleHTTPClient.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shut me down</li>
<li><strong>_carouselready</strong> : Receive NEXT when carousel has completed a request</li>
<li><strong>inbox</strong> : URLs to download - a dict {'url':'x', 'postbody':'y'} or a just the URL as a string</li>
<li><strong>_carouselinbox</strong> : Data from SingleShotHTTPClient via Carousel</li>
</ul>
<h3 id="outboxes"><span id="symbol-SimpleHTTPClient.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>debug</strong> : Information to aid debugging</li>
<li><strong>outbox</strong> : Requested file's data string</li>
<li><strong>signal</strong> : Signal I have shutdown</li>
<li><strong>_carouselnext</strong> : Create a new SingleShotHTTPClient</li>
<li><strong>_carouselsignal</strong> : Shutdown the carousel</li>
</ul>
<h3 id="methods-defined-here">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self"><span id="symbol-SimpleHTTPClient.__init__">__init__(self)</span></h4>
<p>Create and link to a carousel object</p>
<h4 id="cleanupself"><span id="symbol-SimpleHTTPClient.cleanup">cleanup(self)</span></h4>
<p>Destroy child components and send producerFinished when we quit.</p>
<h4 id="debugself-msg"><span id="symbol-SimpleHTTPClient.debug">debug(self, msg)</span></h4>
<h4 id="mainself"><span id="symbol-SimpleHTTPClient.main">main(self)</span></h4>
<p>Main loop.</p>
<section>

</section>
<h1 id="kamaelia.protocol.http.httpclient.singleshothttpclient"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Protocol.html" class="reference">Protocol</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.html" class="reference">HTTP</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.html" class="reference">HTTPClient</a>.<a href="/Components/pydoc/Kamaelia.Protocol.HTTP.HTTPClient.SingleShotHTTPClient.html" class="reference">SingleShotHTTPClient</a></h1>
<h2 id="symbol-SingleShotHTTPClient">class SingleShotHTTPClient(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>SingleShotHTTPClient() -&gt; component that can download a file using HTTP by URL</p>
<p>Arguments: - starturl -- the URL of the file to download - [postbody] -- data to POST to that URL - if set to None becomes an empty body in to a POST (of PUT) request - [connectionclass] -- specify a class other than TCPClient to connect with - [method] -- the HTTP method for the request (default to GET normally or POST if postbody != ""</p>
<h3 id="inboxes-1"><span id="symbol-SingleShotHTTPClient.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : UNUSED</li>
<li><strong>_parserinbox</strong> : Data from HTTP parser</li>
<li><strong>_parsercontrol</strong> : Signals from HTTP parser</li>
<li><strong>_tcpcontrol</strong> : Signals from TCP client</li>
<li><strong>inbox</strong> : UNUSED</li>
</ul>
<h3 id="outboxes-1"><span id="symbol-SingleShotHTTPClient.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>signal</strong> : UNUSED</li>
<li><strong>_parsersignal</strong> : Signals for HTTP parser</li>
<li><strong>_tcpoutbox</strong> : Send over TCP connection</li>
<li><strong>debug</strong> : Output to aid debugging</li>
<li><strong>outbox</strong> : Requested file</li>
<li><strong>_tcpsignal</strong> : Signals shutdown of TCP connection</li>
</ul>
<h3 id="methods-defined-here-1">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self-starturl-postbody-connectionclass-extraheaders-method"><span id="symbol-SingleShotHTTPClient.__init__">__init__(self, starturl[, postbody][, connectionclass][, extraheaders][, method])</span></h4>
<h4 id="formrequestself-url"><span id="symbol-SingleShotHTTPClient.formRequest">formRequest(self, url)</span></h4>
<p>Craft a HTTP request string for the supplied url</p>
<h4 id="handleredirectself-header"><span id="symbol-SingleShotHTTPClient.handleRedirect">handleRedirect(self, header)</span></h4>
<p>Check for a redirect response and queue the fetching the page it points to if it is such a response. Returns true if it was a redirect page and false otherwise.</p>
<h4 id="mainself-1"><span id="symbol-SingleShotHTTPClient.main">main(self)</span></h4>
<p>Main loop.</p>
<h4 id="mainbodyself"><span id="symbol-SingleShotHTTPClient.mainBody">mainBody(self)</span></h4>
<p>Called repeatedly by main loop. Checks inboxes and processes messages received. Start the fetching of the new page if the current one is a redirect and has been completely fetched.</p>
<h4 id="makerequestself-request"><span id="symbol-SingleShotHTTPClient.makeRequest">makeRequest(self, request)</span></h4>
<p>Connect to the remote HTTP server and send request</p>
<h4 id="shutdownkidsself"><span id="symbol-SingleShotHTTPClient.shutdownKids">shutdownKids(self)</span></h4>
<p>Close TCP connection and HTTP parser</p>
<section>

</section>
</section>
</div>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer? Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701" class="reference">here</a> in reply to the documentation thread in the Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</em></p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
