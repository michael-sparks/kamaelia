<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | <a href="/About.html">About</a> | <a href="/Developers.html">Developers</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>Feb 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<div class="container">
<h1 id="kamaelia.util.backplane"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Util.html" class="reference">Util</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.html" class="reference">Backplane</a></h1>
<section>
<div class="container">
<ul>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Util.Backplane.Backplane.html" class="reference">Backplane</a></strong></li>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Util.Backplane.PublishTo.html" class="reference">PublishTo</a></strong></li>
<li><strong>component <a href="/Components/pydoc/Kamaelia.Util.Backplane.SubscribeTo.html" class="reference">SubscribeTo</a></strong></li>
</ul>
</div>
<ul>
<li><a href="#177" class="reference">Publishing and Subscribing with Backplanes</a>
<ul>
<li><a href="#178" class="reference">Example usage</a></li>
<li><a href="#179" class="reference">More detail</a></li>
<li><a href="#180" class="reference">Implementation details</a></li>
</ul></li>
</ul>
</section>
<h1 id="publishing-and-subscribing-with-backplanes-177">Publishing and Subscribing with Backplanes {#177}</h1>
<p>Backplanes provide a way to 'publish' data under a name, enabling other parts of the system to 'subscribe' to it on the fly, without having to know about the actual component(s) the data is coming from.</p>
<p>It is a quick and easy way to distribute or share data. Think of them like backplane circuit boards - where other circuit boards can plug in to send or receive any signals they need.</p>
<h2 id="example-usage-178"><span id="example-usage">Example usage</span> {#178}</h2>
<p>A system where several producers publish data, for consumers to pick up:</p>
<pre class="literal-block"><code>Pipeline( Producer1(),
          PublishTo(&quot;DATA&quot;)
        ).activate()

Pipeline( Producer2(),
          PublishTo(&quot;DATA&quot;)
        ).activate()

Pipeline( SubscribeTo(&quot;DATA&quot;),
          Consumer1(),
        ).activate()

Pipeline( SubscribeTo(&quot;DATA&quot;),
          Consumer2(),
        ).activate()

Backplane(&quot;DATA&quot;).run()</code></pre>
<p>A server where multiple clients can connect and they all get sent the same data at the same time:</p>
<pre class="literal-block"><code>Pipeline( Producer(),
          PublishTo(&quot;DATA&quot;)
        ).activate()

SimpleServer(protocol=SubscribeTo(&quot;DATA&quot;), port=1500).activate()

Backplane(&quot;DATA&quot;).run()</code></pre>
<h2 id="more-detail-179"><span id="more-detail">More detail</span> {#179}</h2>
<p>The Backplane component collects data from publishers and sends it out to subscribers.</p>
<p>You can have as many backplanes as you like in a running system - provided they all register under different names.</p>
<p>A backplane can have multiple subscribers and multiple publishers. Publishers and subscribers can be created and destroyed on the fly.</p>
<p>To shut down a PublishTo() component, send a producerFinished() or shutdownMicroprocess() message to its "control" inbox. This does <em>not</em> propagate and therefore does <em>not</em> cause the Backplane or any subscribers to terminate.</p>
<p>To shut down a SubscribeTo() component, send a producerFinished() or shutdownMicroprocess() message to its "control" inbox. It will then immediately forward the mesage on out of its "signal" outbox and terminate.</p>
<p>To shut down the Backplane itself, send a producerFinished() or shutdownMicroprocess() message to its "control" inbox. It will then immediately terminate and also propagate this message onto any subscribers (SubscribeTo components), causing them to also terminate.</p>
<h2 id="implementation-details-180"><span id="implementation-details">Implementation details</span> {#180}</h2>
<p>Backplane is actually based on a <a href="/Components/pydoc/Kamaelia.Util.Splitter.PlugSplitter.html" class="reference">Kamaelia.Util.Splitter.PlugSplitter</a> component, and the SubscribeTo component is a wrapper around a <a href="/Components/pydoc/Kamaelia.Util.Splitter.Plug.html" class="reference">Kamaelia.Util.Splitter.Plug</a>.</p>
<p>The Backplane registers itself with the coordinating assistant tracker.</p>
<ul>
<li>Its "inbox" inbox is registered under the name "Backplane_I_&lt;name&gt;"</li>
<li>Its "configuration" inbox is registered under the name "Backplane_O_&lt;name&gt;"</li>
</ul>
<p>PublishTo components look up the "Backplane_I_&lt;name&gt;" service and simply forward data sent to their "inbox" inboxes direct to the "inbox" inbox of the PlugSplitter - causing it to be distributed to all subscribers.</p>
<p>SubscribeTo components look up the "Backplane_O_&lt;name&gt;" service and request to have their "inbox" and "control" inboxes connected to the PlugSplitter. SubscribeTo then forwards on any messages it receives out of its "outbox" and "signal" outboxes respectively.</p>
<p>The PlugSplitter component's "control" inbox and "signal" outbox are not advertised as services. To shut down a Backplane you must therefore send a shutdownMicroprocess() or producerFinished() message directly to its "control" inbox. When this happens, the shutdown message will be forwarded on to all subscribers - causing SubscribeTo components to also shut down.</p>
<hr />
<section>
<h1 id="kamaelia.util.backplane.backplane"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Util.html" class="reference">Util</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.html" class="reference">Backplane</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.Backplane.html" class="reference">Backplane</a></h1>
<h2 id="symbol-Backplane">class Backplane(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>Backplane(name) -&gt; new Backplane component.</p>
<p>A named backplane to which data can be published for subscribers to pick up.</p>
<ul>
<li>Use PublishTo components to publish data to a Backplane.</li>
<li>Use SubscribeTo components to receive data published to a Backplane.</li>
</ul>
<p>Keyword arguments:</p>
<ul>
<li>name -- The name for the backplane. publishers and subscribers connect to this by using the same name.</li>
</ul>
<h3 id="inboxes"><span id="symbol-Backplane.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shutdown signalling (shuts down the backplane and all subscribers</li>
<li><strong>inbox</strong> : NOT USED</li>
</ul>
<h3 id="outboxes"><span id="symbol-Backplane.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : NOT USED</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
<h3 id="methods-defined-here">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self-name"><span id="symbol-Backplane.__init__">__init__(self, name)</span></h4>
<h4 id="childrendoneself"><span id="symbol-Backplane.childrenDone">childrenDone(self)</span></h4>
<p>Unplugs any children that have terminated, and returns true if there are no running child components left (ie. their microproceses have finished)</p>
<h4 id="mainself"><span id="symbol-Backplane.main">main(self)</span></h4>
<p>Main loop.</p>
<section>

</section>
<h1 id="kamaelia.util.backplane.publishto"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Util.html" class="reference">Util</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.html" class="reference">Backplane</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.PublishTo.html" class="reference">PublishTo</a></h1>
<h2 id="symbol-PublishTo">class PublishTo(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>PublishTo(destination) -&gt; new PublishTo component</p>
<p>Publishes data to a named Backplane. Any data sent to the "inbox" inbox is sent to all (any) subscribers to the same named Backplane.</p>
<p>Keyword arguments:</p>
<ul>
<li>destination -- the name of the Backplane to publish data to</li>
</ul>
<h3 id="inboxes-1"><span id="symbol-PublishTo.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shutdown signalling (doesn't shutdown the Backplane)</li>
<li><strong>inbox</strong> : Send to here data to be published to the backplane</li>
</ul>
<h3 id="outboxes-1"><span id="symbol-PublishTo.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : NOT USED</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
<h3 id="methods-defined-here-1">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self-destination"><span id="symbol-PublishTo.__init__">__init__(self, destination)</span></h4>
<h4 id="mainself-1"><span id="symbol-PublishTo.main">main(self)</span></h4>
<p>Main loop.</p>
<section>

</section>
<h1 id="kamaelia.util.backplane.subscribeto"><a href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a href="/Components/pydoc/Kamaelia.Util.html" class="reference">Util</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.html" class="reference">Backplane</a>.<a href="/Components/pydoc/Kamaelia.Util.Backplane.SubscribeTo.html" class="reference">SubscribeTo</a></h1>
<h2 id="symbol-SubscribeTo">class SubscribeTo(<a href="/Docs/Axon/Axon.Component.component.html" class="reference">Axon.Component.component</a>)</h2>
<p>SubscribeTo(source) -&gt; new SubscribeTo component</p>
<p>Subscribes to a named Backplane. Receives any data published to that backplane and sends it on out of its "outbox" outbox.</p>
<p>Keyword arguments:</p>
<ul>
<li>source -- the name of the Backplane to subscribe to for data</li>
</ul>
<h3 id="inboxes-2"><span id="symbol-SubscribeTo.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> : Shutdown signalling (doesn't shutdown the Backplane)</li>
<li><strong>inbox</strong> : NOT USED</li>
</ul>
<h3 id="outboxes-2"><span id="symbol-SubscribeTo.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : Data received from the backplane (that was published to it)</li>
<li><strong>signal</strong> : Shutdown signalling</li>
</ul>
<h3 id="methods-defined-here-2">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods (except construction). This documentation is designed as a roadmap as to their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self-source"><span id="symbol-SubscribeTo.__init__">__init__(self, source)</span></h4>
<h4 id="childrendoneself-1"><span id="symbol-SubscribeTo.childrenDone">childrenDone(self)</span></h4>
<p>Unplugs any children that have terminated, and returns true if there are no running child components left (ie. their microproceses have finished)</p>
<h4 id="mainself-2"><span id="symbol-SubscribeTo.main">main(self)</span></h4>
<p>Main loop.</p>
<section>

</section>
</section>
</div>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be clearer? Want to help improve it? Constructive criticism is very welcome - especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701" class="reference">here</a> in reply to the documentation thread in the Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38 UTC/GMT</em></p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
