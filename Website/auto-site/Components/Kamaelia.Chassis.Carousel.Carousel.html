<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>March 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<p><span
style="font-size:24pt;font-weight:600">Kamaelia.Chassis.Carousel.Carousel</span></p>
<p><span style="font-size:16pt">Here we go again, and
again,...</span></p>
<p><span style="font-size:14pt;font-weight:600">Descripton</span></p>
<div class="boxright">
<p><span style="font-weight:600">Inboxes:</span></p>
<ul>
<li><span style="font-family:Courier">inbox</span> - passthrough to
child</li>
<li><span style="font-family:Courier">next</span> - where we receive
requests to replace the child component</li>
<li><span style="font-family:Courier">control</span> - where we recieve
shutdown requests from outside</li>
<li><span style="font-family:Courier">_control</span> - Expect
'producerFinished' or 'shutdownMicroprocess' from child</li>
</ul>
<p><span style="font-weight:600">Outboxes:</span></p>
<ul>
<li><span style="font-family:Courier">outbox</span> - passthrough from
child</li>
<li><span style="font-family:Courier">signal</span> -</li>
<li><span style="font-family:Courier">_signal</span> - For sending
'shutdownMicroprocess' to child</li>
<li><span style="font-family:Courier">requestNext</span> - For
requesting new child component</li>
</ul>
</div>
<p>This chassis component is for making a carousel of components. It
gets its name from a broadcast carousel - where a programme (or set of
programmes) is broadcast one after another, often on a loop.
Alternatively, think of public information screens which display a
looping carousel of slides of information.</p>
<p>If this makes no sense, suppose you want to read data from a sequence
of files - one after another. Provide a carousel with a filereader
component and a source of filenames, and it will make a new filereader
for each file in turn, outputting their data one after another. The
carousel automatically asks the filename source for a new item when its
current child signals that it has finished.</p>
<p>You gain reusability from things that are not directly reusable and
normally come to a halt.</p>
<p><span style="font-size:14pt;font-weight:600">Examples</span></p>
<p>Reading from a sequence of files</p>
<p>1. Write a factory function that takes a single argument and returns
a new component for the carousel:</p>
<p>2. Make the carousel giving it the factory function:</p>
<p>3. Make a source of instructions for the carousel: (in this case, a
source of filenames)</p>
<p>4. Wire the source and carousel together:</p>
<p>5. Activate:</p>
<p><span style="font-size:14pt;font-weight:600">How does it
work?</span></p>
<p>The carousel chassis creates and encapsulates (as a child) the
component you want it to, and lets it get on with it.</p>
<p>Anything sent to the carousel's "inbox" inbox is passed onto the
child component. Anything the child sends out appears at the carousel's
"outbox" and "signal" outboxes.</p>
<p>If the child sends an <span
style="font-family:Courier">Axon.Ipc.shutdownMicroprocess</span> or
<span style="font-family:Courier">Axon.Ipc.producerFinished</span>
message then the carousel gets rid of that component and sends a "NEXT"
message to its "<span style="font-family:Courier">requestNext</span>"
outbox.</p>
<p>Another component, such as a Chooser, should respond to this message
by sending the new set of arguments (for the factory function) to the
carousel's "next" inbox. The carousel then uses your factory function to
create a new child component. And so the cycle repeats.</p>
<p>If the argument source needs to receive a "NEXT" message before
sending its first set of arguments, then set the argument
make1stRequest=True when creating the carousel.</p>
<p>You can send new orders to the <span
style="font-family:Courier">next</span> inbox at any time. The carousel
will immediately unwire that child (and create the new one) and ask the
old child to shut down by sending an <span
style="font-family:Courier">Axon.Ipc.shutdownMicroprocess</span> message
to its <span style="font-family:Courier">control</span> inbox.</p>
<p>The carousel will shutdown in response to an <span
style="font-family:Courier">Axon.Ipc.shutdownMicroprocess</span> or
<span style="font-family:Courier">Axon.Ipc.producerFinished</span>
message. It will also terminate any child component in the same way as
described above.</p>
<p><span style="font-size:14pt;font-weight:600">Pydoc Style
Docs</span></p>
<h1 id="kamaelia.chassis.carousel.carousel"><a
href="/Components/pydoc/Kamaelia.html" class="reference">Kamaelia</a>.<a
href="/Components/pydoc/Kamaelia.Chassis.html"
class="reference">Chassis</a>.<a
href="/Components/pydoc/Kamaelia.Chassis.Carousel.html"
class="reference">Carousel</a>.<a
href="/Components/pydoc/Kamaelia.Chassis.Carousel.Carousel.html"
class="reference">Carousel</a></h1>
<p>For examples and more explanations, see the <a
href="/Components/pydoc/Kamaelia.Chassis.Carousel.html"
class="reference">module level docs.</a></p>
<hr />
<h2 id="symbol-Carousel">class Carousel(<a
href="/Docs/Axon/Axon.Component.component.html"
class="reference">Axon.Component.component</a>)</h2>
<p>Carousel(componentFactory,[make1stRequest]) -&gt; new Carousel
component</p>
<p>Create a Carousel component that makes child components one at a time
(in carousel fashion) using the supplied factory function.</p>
<p>Keyword arguments:</p>
<ul>
<li>componentFactory -- function that takes a single argument and
returns a component</li>
<li>make1stRequest -- if True, Carousel will send an initial "NEXT"
request. (default=False)</li>
</ul>
<h3 id="inboxes"><span id="symbol-Carousel.Inboxes">Inboxes</span></h3>
<ul>
<li><strong>control</strong> :</li>
<li><strong>inbox</strong> : child's inbox</li>
<li><strong>next</strong> : requests to replace child</li>
</ul>
<h3 id="outboxes"><span
id="symbol-Carousel.Outboxes">Outboxes</span></h3>
<ul>
<li><strong>outbox</strong> : child's outbox</li>
<li><strong>signal</strong> :</li>
<li><strong>_signal</strong> : internal use: for sending
'shutdownMicroprocess' to child</li>
<li><strong>requestNext</strong> : for requesting new child
component</li>
</ul>
<h3 id="methods-defined-here">Methods defined here</h3>
<div class="container">
<div class="boxright">
<p><strong>Warning!</strong></p>
<p>You should be using the inbox/outbox interface, not these methods
(except construction). This documentation is designed as a roadmap as to
their functionalilty for maintainers and new component developers.</p>
</div>
</div>
<h4 id="init__self-componentfactory-make1strequest"><span
id="symbol-Carousel.__init__">__init__(self, componentFactory[,
make1stRequest])</span></h4>
<p>x.__init__(...) initializes x; see x.__class__.__doc__ for
signature</p>
<h4 id="checkcontrolself"><span
id="symbol-Carousel.checkControl">checkControl(self)</span></h4>
<h4 id="handlechildterminationsself"><span
id="symbol-Carousel.handleChildTerminations">handleChildTerminations(self)</span></h4>
<p>Unplugs any children that have terminated</p>
<h4 id="instantiatenewchildself-args"><span
id="symbol-Carousel.instantiateNewChild">instantiateNewChild(self,
args)</span></h4>
<h4 id="mainself"><span id="symbol-Carousel.main">main(self)</span></h4>
<h4 id="requestnextself"><span
id="symbol-Carousel.requestNext">requestNext(self)</span></h4>
<p>Sends 'next' out the 'requestNext' outbox</p>
<h4 id="shutdownchildself-shutdownmsg"><span
id="symbol-Carousel.shutdownChild">shutdownChild(self,
shutdownMsg)</span></h4>
<section>

</section>
<h1 id="feedback">Feedback</h1>
<p>Got a problem with the documentation? Something unclear that could be
clearer? Want to help improve it? Constructive criticism is very welcome
- especially if you can suggest a better rewording!</p>
<p>Please leave you feedback <a
href="../../../cgi-bin/blog/blog.cgi?rm=viewpost&amp;nodeid=1142023701"
class="reference">here</a> in reply to the documentation thread in the
Kamaelia blog.</p>
<p><em>-- Automatic documentation generator, 05 Jun 2009 at 03:01:38
UTC/GMT</em></p>
<p>class Carousel(Axon.Component.component)</p>
<p>A carousel component that makes child components one at a time and
lets them do their stuff. Replacing them when they terminate or if
requested to do so.</p>
<p><span style="font-weight:600">Inboxes:</span></p>
<ul>
<li>inbox - passthrough to child's inbox "inbox"</li>
<li>next - where we recieve requests to replace the child component</li>
<li>control - where we recieve shutdown requests from outside</li>
<li>_control - internal use : to recieve 'producerFinished' or
'shutdownMicroprocess' from child</li>
</ul>
<p><span style="font-weight:600">Outboxes:</span></p>
<ul>
<li>outbox - passthrough from child's outbox "outbox"</li>
<li>signal -</li>
<li>_signal - internal use: for sending 'shutdownMicroprocess' to
child</li>
</ul>
<p>requestNext - for requesting new child component</p>
<p><span style="font-weight:600">All methods, except __init__ are
private implementation details of the component</span></p>
<p><span style="font-weight:600">__init__(self, componentFactory,
make1stRequest=False)</span></p>
<ul>
<li>__init__(componentFactory)</li>
<li>__init__(componentFactory,make1stRequest=True)</li>
<li>componentFactory(argument) -&gt; new component<br />
factory function for creating a new child according to specified
arguments</li>
<li>make1stRequest = True<br />
Carousel will, immediately after activation, send a "NEXT" message to
its "requestNext" outbox. Otherwise the carousel just waits.</li>
</ul>
<p><span style="font-weight:600">handleFinishedChild(self)</span></p>
<p>Unplugs the child if a shutdownMicroprocess or producerFinished
message is received from it. Also sends a "NEXT" request if one has not
already been sent.</p>
<p><span style="font-weight:600">handleNewChild(self)</span></p>
<p>If data received on "next" inbox, removes any existing child and
creates and wires in a new one.</p>
<p>Received data is passed as an argument to the factory function
(supplied at initialisation) that creates the new child.</p>
<p><span style="font-weight:600">main(self)</span></p>
<p>Main loop</p>
<p><span style="font-weight:600">requestNext(self)</span></p>
<p>Sends 'next' out the 'requestNext' outbox</p>
<p><span style="font-weight:600">shutdown(self)</span></p>
<p>Returns True if a shutdownMicroprocess or producerFinished message
was received.</p>
<p><span style="font-weight:600">unplugChildren(self)</span></p>
<p>Sends 'shutdownMicroprocess' to children and unwires and disowns
them.</p>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
