<html>
<head>
<title> index </title>
<link rel=stylesheet type="text/css" href="/site-resources/base.css">
<link rel=stylesheet type="text/css" href="/site-resources/pandoc.css">
</head>
<body>
<div class="banner">
<P> <a href="/Home.html">Home</a> | 
    <a href="/About.html">About</a> | 
    <a href="/RecentChanges.html">Recent Changes</a> | 
    <a href="/Documentation.html">Documentation</a> |
    <a href="/Community.html">Community</a>
</div>
<div class="pagecontainer">
<div class="pagesection">
<div id="pagenote">
<p>March 2024 - This site, and Kamaelia are <a href="https://github.com/sparkslabs/kamaelia/issues/15">being updated</a>. There is significant work needed, and <a href="https://github.com/sparkslabs/kamaelia/pulls">PRs</a> are welcome.
</div>
<h1 id="AquickwordaboutAxonandKamaelia">Kamaelia: A quick overview<a
href="http://trac.defuze.org/wiki/KamaeliaQuickWord#AquickwordaboutAxonandKamaelia"
class="anchor" title="Link to this section"></a></h1>
<div class="wikipage">
<div id="searchable">
<p><a href="http://kamaelia.sourceforge.net/" class="ext-link"><span
class="icon">Kamaelia</span></a> is a Python library by <a
href="http://www.bbc.co.uk/opensource/projects/kamaelia/"
class="ext-link"><span class="icon">BBC Research</span></a> for
concurrent programming using a simple pattern of components that send
and receive data from each other. The following is an example of a
system made by piping the output of one component into another:<br />
</p>
<blockquote>
<pre><code>from Kamaelia.Chassis.Pipeline import Pipeline
from Kamaelia.Util.Console import ConsoleReader, ConsoleEchoer

Pipeline(
         ConsoleReader(),
         ConsoleEchoer(),
).run()</code></pre>
</blockquote>
<p>Or maybe you want to build a presentation tool? (imports &amp; setup
excluded here - <a
href="../../../Examples/SimplestPresentationTool">full
example</a>)<br />
</p>
<blockquote>
<pre><code>Graphline(
     CHOOSER = Chooser(items = files),
     IMAGE = Image(size=(800,600), position=(8,48)),
     NEXT = Button(caption=&quot;Next&quot;, msg=&quot;NEXT&quot;, position=(72,8)),
     PREVIOUS = Button(caption=&quot;Previous&quot;, msg=&quot;PREV&quot;,position=(8,8)),
     FIRST = Button(caption=&quot;First&quot;, msg=&quot;FIRST&quot;,position=(256,8)),
     LAST = Button(caption=&quot;Last&quot;, msg=&quot;LAST&quot;,position=(320,8)),
     linkages = {
        (&quot;NEXT&quot;,&quot;outbox&quot;) : (&quot;CHOOSER&quot;,&quot;inbox&quot;),
        (&quot;PREVIOUS&quot;,&quot;outbox&quot;) : (&quot;CHOOSER&quot;,&quot;inbox&quot;),
        (&quot;FIRST&quot;,&quot;outbox&quot;) : (&quot;CHOOSER&quot;,&quot;inbox&quot;),
        (&quot;LAST&quot;,&quot;outbox&quot;) : (&quot;CHOOSER&quot;,&quot;inbox&quot;),
        (&quot;CHOOSER&quot;,&quot;outbox&quot;) : (&quot;IMAGE&quot;,&quot;inbox&quot;),
     }
).run()</code></pre>
</blockquote>
<p>That's all well and good, but how is a component written? What's
inside it?<br />
</p>
<blockquote>
<div class="code">
<pre><code>from Axon.Component import component
from Axon.Ipc import shutdownMicroprocess, producerFinished

class MyComponent(component):    
    Inboxes = {&quot;inbox&quot;        : &quot;some data in&quot;,
               &quot;control&quot;      : &quot;stops the component&quot;}
    Outboxes = {&quot;outbox&quot;      : &quot;some data out&quot;,
                &quot;signal&quot;      : &quot;Shutdown signal&quot;}

    def __init__(self, **argd):
        super(MyComponent, self).__init__(**argd)

    def main(self):
        while not self.doShutdown():
            if self.dataReady(&quot;inbox&quot;):
                data = self.recv(&quot;inbox&quot;)
                # let&#39;s echo what we received...
                self.send(data, &#39;outbox&#39;)
                    
            if not self.anyReady():
                self.pause()
  
            yield 1

    def doShutdown(self):
        if self.dataReady(&quot;control&quot;):
            mes = self.recv(&quot;control&quot;)                
            if isinstance(mes, shutdownMicroprocess) or isinstance(mes, producerFinished):
                self.send(producerFinished(), &quot;signal&quot;)
                return True
        return False</code></pre>
</div>
</blockquote>
<p>This is the simplest form a component can take. A component:</p>
<ul>
<li>is a class that inherits from
<code>Axon.Component.component</code></li>
<li>has inboxes and outboxes</li>
</ul>
<p>By inheriting from <code>Axon.Component.component</code> you make
your class usable by the <a
href="http://kamaelia.sourceforge.net/MiniAxon/" class="ext-link"><span
class="icon">Axon</span></a> library which is at the core of the
Kamaelia library. It allows for your class to be used with other
components.</p>
<p>Inboxes and outboxes allow your component to be linked to and from by
other components.</p>
<p>Then your class defines a main method that simple loop until a
specific kind of message is put into the "control" inbox of the
component. During the looping it checks for any inboxes and process data
read from them. Eventually it yields to the Axon scheduler that goes to
the next available component. By using a generator we allow the
shceduler to come back to the component's loop eventually.</p>
<p>Note that inboxes and outboxes are pure Python dictionary hence they
allow for any Python objects and are not limited to strings. The
component described above is simple, complex components have many
inboxes and outboxes to link to and from.</p>
<h2 id="Kamaelia">Kamaelia<a
href="http://trac.defuze.org/wiki/KamaeliaQuickWord#Kamaelia"
class="anchor" title="Link to this section"></a></h2>
<p>Kamaelia is a library of complex components for <a
href="http://kamaelia.sourceforge.net/Components" class="ext-link"><span
class="icon">all kind of tasks and topics</span></a>:</p>
<p>For example taking the previous example we could write:</p>
<blockquote>
<div class="code">
<pre><code>from Kamaelia.Chassis.Pipeline import Pipeline
from Kamaelia.Util.Console import ConsoleReader, ConsoleEchoer

Pipeline(
         ConsoleReader(),
         MyComponent(),
         ConsoleEchoer(),
).run()</code></pre>
</div>
</blockquote>
<p><a
href="http://kamaelia.sourceforge.net/Components/pydoc/Kamaelia.Experimental.Chassis.Pipeline.html"
class="ext-link"><span class="icon">Pipeline</span></a> is component
that automatically links outboxes to inboxes of each provided component.
The console components allow for reading and writing data from and to
the command line. Because <code>Pipeline</code> is also a component
itself it could in turns be used in another component.</p>
<p>Note that calling the <code>run()</code> method on a component blocks
the process until it is killed. You can also simply activate a component
which will then be in an active state but will run only when eventually
<code>run</code> is called on another component. In other words, the
previous snippet could also be written like that:</p>
<blockquote>
<div class="code">
<pre><code>from Kamaelia.Util.Console import ConsoleReader, ConsoleEchoer

reader = ConsoleReader()
reader.activate()

mycomp = MyComponent()
mycomp.link((reader, &#39;outbox&#39;), (mycomp, &#39;inbox&#39;))
mycomp.activate()

writer = ConsoleEchoer()
mycomp.link((mycomp, &#39;outbox&#39;), (writer, &#39;inbox&#39;))

writer.run()</code></pre>
</div>
</blockquote>
<p>Now that you have the basics of Kamaelia you should dive into its <a
href="http://kamaelia.sourceforge.net/Cookbook.html"
class="ext-link"><span class="icon">documentation</span></a> and have
fun with its fantastic library.</p>
</div>
</div>

</div> <!-- end section -->
</div> <!-- end page container -->

<div class="banner">
<a href="https://www.bbc.co.uk/rd"><img src="/site-resources/BBCRD_Logo.jpg"></a>
<P id="mini">  Kamaelia is an open source project originated from and guided
by <a href="https://www.bbc.co.uk/rd">BBC Research.</a> For more information
browse the site or get in contact.
<br>This is an ongoing community based development site.  As a result the
contents of this page is the opinions of the contributors of the pages
involved not the organisations involved.  Specificially, this page may
contain personal views which are not the views of the BBC.

<br>(C) Copyright 2004-2024 Kamaelia Contributors, including the British
Broadcasting Corporation, All Rights Reserved.
</div>
</body>
</html>
